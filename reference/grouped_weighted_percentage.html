<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Percentages within groups where different inputs have different weights — grouped_weighted_percentage • hiRx</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Percentages within groups where different inputs have different weights — grouped_weighted_percentage"><meta property="og:description" content="This definitely requires explanation, but an example should make it clear.
The motivation of this function is to compute the percentage of people
within a municipality that have a certain demographic characteristic. The
catch is that the data are not reported by municipality, but by census tract,
and census tract boundaries don't match the boundaries of the municipalities.
So, to compute the percentage of people who have health insurance in Racine,
WI, we need to count the number of people in each census tract that overlaps
with Racine, weight the tracts by how much of their populations are actually
within the city's borders, and then find the weighted percent with insurance
by dividing the weighted sum of people with insurance by the weighted sum of
all people."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">hiRx</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/style-reference.html">Word Style Reference Document</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Percentages within groups where different inputs have different weights</h1>

    <div class="hidden name"><code>grouped_weighted_percentage.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This definitely requires explanation, but an example should make it clear.
The motivation of this function is to compute the percentage of people
within a municipality that have a certain demographic characteristic. The
catch is that the data are not reported by municipality, but by census tract,
and census tract boundaries don't match the boundaries of the municipalities.
So, to compute the percentage of people who have health insurance in Racine,
WI, we need to count the number of people in each census tract that overlaps
with Racine, weight the tracts by how much of their populations are actually
within the city's borders, and then find the weighted percent with insurance
by dividing the weighted sum of people with insurance by the weighted sum of
all people.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">grouped_weighted_percentage</span><span class="op">(</span></span>
<span>  <span class="va">.x</span>,</span>
<span>  <span class="va">groups</span>,</span>
<span>  <span class="va">in_value_field</span>,</span>
<span>  <span class="va">all_value_field</span>,</span>
<span>  <span class="va">in_weight_field</span>,</span>
<span>  <span class="va">all_weight_field</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg--x">.x<a class="anchor" aria-label="anchor" href="#arg--x"></a></dt>
<dd><p>a tibble of data</p></dd>


<dt id="arg-groups">groups<a class="anchor" aria-label="anchor" href="#arg-groups"></a></dt>
<dd><p>a vector of strings that name grouping variables</p></dd>


<dt id="arg-in-value-field">in_value_field<a class="anchor" aria-label="anchor" href="#arg-in-value-field"></a></dt>
<dd><p>the field with counts of in-group members</p></dd>


<dt id="arg-all-value-field">all_value_field<a class="anchor" aria-label="anchor" href="#arg-all-value-field"></a></dt>
<dd><p>the field with counts of all items</p></dd>


<dt id="arg-in-weight-field">in_weight_field<a class="anchor" aria-label="anchor" href="#arg-in-weight-field"></a></dt>
<dd><p>the field with weights for in-group members</p></dd>


<dt id="arg-all-weight-field">all_weight_field<a class="anchor" aria-label="anchor" href="#arg-all-weight-field"></a></dt>
<dd><p>the field with weights for all items</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>a tibble with weighted percents per group</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">toy_data</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="op">~</span> <span class="va">City</span>, <span class="op">~</span> <span class="va">Tract</span>, <span class="op">~</span> <span class="va">Insured</span>, <span class="op">~</span> <span class="va">All</span>, <span class="op">~</span> <span class="va">`City Pop`</span>, <span class="op">~</span> <span class="va">`Tract Pop`</span>,</span></span>
<span class="r-in"><span>    <span class="st">"Foo"</span>,  <span class="st">"A"</span>,     <span class="fl">10L</span>,       <span class="fl">10L</span>,      <span class="fl">0L</span>,          <span class="fl">99L</span>,</span></span>
<span class="r-in"><span>    <span class="st">"Bar"</span>,  <span class="st">"A"</span>,     <span class="fl">10L</span>,       <span class="fl">10L</span>,     <span class="fl">22L</span>,          <span class="fl">99L</span>,</span></span>
<span class="r-in"><span>    <span class="st">"Foo"</span>,  <span class="st">"B"</span>,     <span class="fl">25L</span>,       <span class="fl">42L</span>,   <span class="fl">1200L</span>,        <span class="fl">1900L</span>,</span></span>
<span class="r-in"><span>    <span class="st">"Bar"</span>,  <span class="st">"B"</span>,     <span class="fl">25L</span>,       <span class="fl">42L</span>,    <span class="fl">700L</span>,        <span class="fl">1900L</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">grouped_weighted_percentage</span><span class="op">(</span><span class="va">toy_data</span>,</span></span>
<span class="r-in"><span>                            groups <span class="op">=</span> <span class="st">"City"</span>,</span></span>
<span class="r-in"><span>                            in_value_field <span class="op">=</span> <span class="st">"Insured"</span>,</span></span>
<span class="r-in"><span>                            all_value_field <span class="op">=</span> <span class="st">"All"</span>,</span></span>
<span class="r-in"><span>                            in_weight_field <span class="op">=</span> <span class="st">"City Pop"</span>,</span></span>
<span class="r-in"><span>                            all_weight_field <span class="op">=</span> <span class="st">"Tract Pop"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   City  Insured   All `Percent Insured`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> Bar      11.4  17.7             0.646</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> Foo      15.8  26.5             0.595</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Ben Taft.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer></div>






  </body></html>

